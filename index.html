<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Color HTML</title>
    <link rel="stylesheet" href="./public/style.css" />
    <link rel="stylesheet" href="lib/material-darker.css" />
    <link rel="stylesheet" href="lib/codemirror.css" />

    <script src="lib/html2canvas.js"></script>
    <script src="lib/codemirror.js"></script>
    <script src="mode/css/css.js"></script>
    <script src="mode/htmlmixed/htmlmixed.js"></script>
    <script src="mode/javascript/javascript.js"></script>
    <script src="mode/xml/xml.js"></script>
  </head>
  <body>
    <div class="container grid">
      <form>
        <h2>HTML</h2>
        <textarea name="html" id="html">
<p>Skip Head Tag,Alter To see Changes</p></textarea
        >
        <h2>CSS</h2>
        <textarea name="css" id="css"></textarea>
      </form>
      <center>
        <div id="status"></div>
        <div class="options">
          <button onclick="colorizeIframe()">Colorize</button>
          <input type="color" name="hColor" id="nColor" />
          <input type="checkbox" name="hue" id="hue">
          <label for="hue">Select Hue</label>

          <button onclick="downloadImg()">Download</button>
          <a id="link"></a>
          <select id="downloadFormat">
            <option value="png">png</option>
            <option value="jpeg">jpeg</option>
            <option value="bmp">bmp</option>
          </select>
        </div>
      </center>
    </div>
    <div class="output grid">
      <iframe id="outIframe" frameborder="1"></iframe>
    </div>
    <script>
      (function () {
        const iframe = document.getElementById("outIframe");
        iframeDocument = iframe.contentWindow.document;
        let body = iframeDocument.getElementsByTagName("body")[0];
        let head = (iframeDocument.getElementsByTagName("head")[0].innerHTML =
          "<style></style>");
        let styleTag = iframeDocument.getElementsByTagName("style")[0];

        let htmlEditor = CodeMirror.fromTextArea(
          document.getElementById("html"),
          {
            mode: "htmlmixed",
            htmlMode: true,
            lineNumbers: true,
            smartIndent: true,
            autofocus: true,
            theme: "material-darker",
          }
        );
        htmlEditor.setSize(null, 250);
        htmlEditor.on("change", (event) => {
          body.innerHTML = event.getValue();
        });
        htmlEditor.save();

        let cssEditor = CodeMirror.fromTextArea(
          document.getElementById("css"),
          {
            lineNumbers: true,
            smartIndent: true,
            theme: "material-darker",
            mode: "css",
          }
        );
        cssEditor.setSize(null, 250);
        cssEditor.on("change", (event) => {
          styleTag.innerHTML = event.getValue();
        });
        cssEditor.save();
      })();
    </script>
    <script src="public/scripts/colorize.js"></script>
    <script src="public/scripts/dragDrop.js"></script>
    <script src="index.js"></script>
  </body>
</html>
